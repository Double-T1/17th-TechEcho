{% extends 'layouts/base.html' %}
{% load questions %}
{% block content %}
    <div class="p-6 max-w-4xl mx-auto relative mb-2">
        <div class="flex justify-between items-baseline mb-2">
            <div class="flex gap-4 items-center">
                <h1 class="text-2xl">問題：{{question.title}}</h1>
                {% if user.is_authenticated and user != question.user %}
                    {% include "questions/partials/_follows.html" with question=question followed=followed only %}
                {% endif %}
            </div>
            <a href="{% url "questions:index" %}" class="btn">回到問題列表</a>
        </div>

        <div class="p-2 border-2 mb-2">
            <p> 標籤：
                {% for label in question.labels.all %}
                    <span>{{label}} </span>
                {% endfor %}
            </p>
        </div>

        <div class="flex gap-2 mb-2">
            <span>提問者：{{question.user}}</span>
            <span>｜初始日期：{{question.created_at}}</span>
            <span>｜最後修改日期：
                {% if question.updated_at %}
                    {{question.updated_at}}
                {% else %}
                    {{question.created_at}}
                {% endif %}
            </span>
        </div>

        <article  class="p-2 border-2 mb-2">
            <h3 class="mb-2">問題內容：</h3>
            <p class="text-wrap break-all">
                {{question.details|linebreaks}}
            </p>
        </article>

        {% include "questions/partials/_votes.html" with question=question vote=vote user=user only %}

        {% if user.is_authenticated and user == question.user %}
            <div class="flex gap-2">
                <a href="{% url "questions:edit" question.id%}" class="btn">編輯此問題</a>
                <form action="{% url "questions:delete"  question.id%}" method="POST" onSubmit="return confirm('確定要刪除此問題嗎？')">
                    {% csrf_token %}
                    <button class="btn">刪除此問題</button>
                </form>
            </div>
        {% endif %}

    </div>
    {% include "answers/index.html" with answers=answers form=form %}
{% endblock  %}